function draw(gfxname, graph, duration)
{
  var graph, cmdline, gfx, fetch, rrdcmdline;

  cmdline = graphdata[graph].concat([duration]).join("\n");

  try {
    gfx = new RrdGfxCanvas(gfxname);
    fetch = new RrdDataFile();
    rrdcmdline = new RrdCmdLine(gfx, fetch, cmdline);
    rrdcmdline.graph.graph_paint();
  } catch (e) {
    console.log("Unable to load graph: " + graph);
  }
}

var graphdata = {
  load: [
    '-w 350',
    '-h 120',
    '-E',
    '-c',
    'BACK#F2F2F2',
    '-c',
    'SHADEA#F2F2F2',
    '-c',
    'SHADEB#F2F2F2',
    '-c',
    'FONT#555555',
    '-c',
    'ARROW#555555',
    '--font',
    'DEFAULT:13:Courier',
    'DEF:s_avg=/docs/rrd/localhost/load/load.rrd:shortterm:AVERAGE',
    'DEF:s_min=/docs/rrd/localhost/load/load.rrd:shortterm:MIN',
    'DEF:s_max=/docs/rrd/localhost/load/load.rrd:shortterm:MAX',
    'DEF:m_avg=/docs/rrd/localhost/load/load.rrd:midterm:AVERAGE',
    'DEF:m_min=/docs/rrd/localhost/load/load.rrd:midterm:MIN',
    'DEF:m_max=/docs/rrd/localhost/load/load.rrd:midterm:MAX',
    'DEF:l_avg=/docs/rrd/localhost/load/load.rrd:longterm:AVERAGE',
    'DEF:l_min=/docs/rrd/localhost/load/load.rrd:longterm:MIN',
    'DEF:l_max=/docs/rrd/localhost/load/load.rrd:longterm:MAX',
    'AREA:s_max#B7EFB7',
    'AREA:s_min#FFFFFF',
    '"LINE1:s_avg#00E000: 1m average"',
    '"LINE1:m_avg#0000FF: 5m average"',
    '"LINE1:l_avg#FF0000:15m average"' ],
  cpu: [
    '-w 350' ,
    '-h 120' ,
    '-E' ,
    '-r' ,
    '-u 100' ,
    '-c',
    'BACK#F2F2F2',
    '-c',
    'SHADEA#F2F2F2',
    '-c',
    'SHADEB#F2F2F2',
    '-c',
    'FONT#555555',
    '-c',
    'ARROW#555555',
    '--font',
    'DEFAULT:13:Courier',
    'DEF:idle_min=/docs/rrd/localhost/cpu-0/cpu-idle.rrd:value:MIN' ,
    'DEF:idle_avg=/docs/rrd/localhost/cpu-0/cpu-idle.rrd:value:AVERAGE' ,
    'DEF:idle_max=/docs/rrd/localhost/cpu-0/cpu-idle.rrd:value:MAX' ,
    'CDEF:idle_nnl=idle_avg,UN,0,idle_avg,IF' ,
    'DEF:wait_min=/docs/rrd/localhost/cpu-0/cpu-wait.rrd:value:MIN' ,
    'DEF:wait_avg=/docs/rrd/localhost/cpu-0/cpu-wait.rrd:value:AVERAGE' ,
    'DEF:wait_max=/docs/rrd/localhost/cpu-0/cpu-wait.rrd:value:MAX' ,
    'CDEF:wait_nnl=wait_avg,UN,0,wait_avg,IF' ,
    'DEF:nice_min=/docs/rrd/localhost/cpu-0/cpu-nice.rrd:value:MIN' ,
    'DEF:nice_avg=/docs/rrd/localhost/cpu-0/cpu-nice.rrd:value:AVERAGE' ,
    'DEF:nice_max=/docs/rrd/localhost/cpu-0/cpu-nice.rrd:value:MAX' ,
    'CDEF:nice_nnl=nice_avg,UN,0,nice_avg,IF' ,
    'DEF:user_min=/docs/rrd/localhost/cpu-0/cpu-user.rrd:value:MIN' ,
    'DEF:user_avg=/docs/rrd/localhost/cpu-0/cpu-user.rrd:value:AVERAGE' ,
    'DEF:user_max=/docs/rrd/localhost/cpu-0/cpu-user.rrd:value:MAX' ,
    'CDEF:user_nnl=user_avg,UN,0,user_avg,IF' ,
    'DEF:system_min=/docs/rrd/localhost/cpu-0/cpu-system.rrd:value:MIN' ,
    'DEF:system_avg=/docs/rrd/localhost/cpu-0/cpu-system.rrd:value:AVERAGE' ,
    'DEF:system_max=/docs/rrd/localhost/cpu-0/cpu-system.rrd:value:MAX' ,
    'CDEF:system_nnl=system_avg,UN,0,system_avg,IF' ,
    'DEF:softirq_min=/docs/rrd/localhost/cpu-0/cpu-softirq.rrd:value:MIN' ,
    'DEF:softirq_avg=/docs/rrd/localhost/cpu-0/cpu-softirq.rrd:value:AVERAGE' ,
    'DEF:softirq_max=/docs/rrd/localhost/cpu-0/cpu-softirq.rrd:value:MAX' ,
    'CDEF:softirq_nnl=softirq_avg,UN,0,softirq_avg,IF' ,
    'DEF:interrupt_min=/docs/rrd/localhost/cpu-0/cpu-interrupt.rrd:value:MIN' ,
    'DEF:interrupt_avg=/docs/rrd/localhost/cpu-0/cpu-interrupt.rrd:value:AVERAGE' ,
    'DEF:interrupt_max=/docs/rrd/localhost/cpu-0/cpu-interrupt.rrd:value:MAX' ,
    'CDEF:interrupt_nnl=interrupt_avg,UN,0,interrupt_avg,IF' ,
    'DEF:steal_min=/docs/rrd/localhost/cpu-0/cpu-steal.rrd:value:MIN' ,
    'DEF:steal_avg=/docs/rrd/localhost/cpu-0/cpu-steal.rrd:value:AVERAGE' ,
    'DEF:steal_max=/docs/rrd/localhost/cpu-0/cpu-steal.rrd:value:MAX' ,
    'CDEF:steal_nnl=steal_avg,UN,0,steal_avg,IF' ,
    'CDEF:steal_stk=steal_nnl' ,
    'CDEF:interrupt_stk=interrupt_nnl,steal_stk,+' ,
    'CDEF:softirq_stk=softirq_nnl,interrupt_stk,+' ,
    'CDEF:system_stk=system_nnl,softirq_stk,+' ,
    'CDEF:user_stk=user_nnl,system_stk,+' ,
    'CDEF:nice_stk=nice_nnl,user_stk,+' ,
    'CDEF:wait_stk=wait_nnl,nice_stk,+' ,
    'CDEF:idle_stk=idle_nnl,wait_stk,+' ,
    'AREA:idle_stk#ffffff' ,
    '"LINE1:idle_stk#ffffff:idle     "' ,
    'AREA:wait_stk#ffebbf' ,
    '"LINE1:wait_stk#ffb000:wait     "' ,
    'AREA:nice_stk#bff7bf' ,
    '"LINE1:nice_stk#00e000:nice     "' ,
    'AREA:user_stk#bfbfff' ,
    '"LINE1:user_stk#0000ff:user     "' ,
    'AREA:system_stk#ffbfbf' ,
    '"LINE1:system_stk#ff0000:system   "' ,
    'AREA:softirq_stk#ffbfff' ,
    '"LINE1:softirq_stk#ff00ff:softirq  "' ,
    'AREA:interrupt_stk#e7bfe7' ,
    '"LINE1:interrupt_stk#a000a0:interrupt"' ,
    'AREA:steal_stk#bfbfbf' ,
    '"LINE1:steal_stk#000000:steal    "' ],
  memory: [
    '-w 350',
    '-h 120',
    '-E' ,
    '-b 1024' ,
    '-c',
    'BACK#F2F2F2',
    '-c',
    'SHADEA#F2F2F2',
    '-c',
    'SHADEB#F2F2F2',
    '-c',
    'FONT#555555',
    '-c',
    'ARROW#555555',
    '--font',
    'DEFAULT:13:Courier',
    'DEF:free_min=/docs/rrd/localhost/memory/memory-free.rrd:value:MIN' ,
    'DEF:free_avg=/docs/rrd/localhost/memory/memory-free.rrd:value:AVERAGE' ,
    'DEF:free_max=/docs/rrd/localhost/memory/memory-free.rrd:value:MAX' ,
    'CDEF:free_nnl=free_avg,UN,0,free_avg,IF' ,
    'DEF:cached_min=/docs/rrd/localhost/memory/memory-cached.rrd:value:MIN' ,
    'DEF:cached_avg=/docs/rrd/localhost/memory/memory-cached.rrd:value:AVERAGE' ,
    'DEF:cached_max=/docs/rrd/localhost/memory/memory-cached.rrd:value:MAX' ,
    'CDEF:cached_nnl=cached_avg,UN,0,cached_avg,IF' ,
    'DEF:buffered_min=/docs/rrd/localhost/memory/memory-buffered.rrd:value:MIN' ,
    'DEF:buffered_avg=/docs/rrd/localhost/memory/memory-buffered.rrd:value:AVERAGE' ,
    'DEF:buffered_max=/docs/rrd/localhost/memory/memory-buffered.rrd:value:MAX' ,
    'CDEF:buffered_nnl=buffered_avg,UN,0,buffered_avg,IF' ,
    'DEF:used_min=/docs/rrd/localhost/memory/memory-used.rrd:value:MIN' ,
    'DEF:used_avg=/docs/rrd/localhost/memory/memory-used.rrd:value:AVERAGE' ,
    'DEF:used_max=/docs/rrd/localhost/memory/memory-used.rrd:value:MAX' ,
    'CDEF:used_nnl=used_avg,UN,0,used_avg,IF' ,
    'CDEF:used_stk=used_nnl' ,
    'CDEF:buffered_stk=buffered_nnl,used_stk,+' ,
    'CDEF:cached_stk=cached_nnl,buffered_stk,+' ,
    'CDEF:free_stk=free_nnl,cached_stk,+' ,
    'AREA:free_stk#bff7bf' ,
    '"LINE1:free_stk#00e000:free    "' ,
    'AREA:cached_stk#bfbfff' ,
    '"LINE1:cached_stk#0000ff:cached  "' ,
    'AREA:buffered_stk#ffebbf' ,
    '"LINE1:buffered_stk#ffb000:buffered"' ,
    'AREA:used_stk#ffbfbf' ,
    '"LINE1:used_stk#ff0000:used    "' ],
  if_octets: [
    '-w 350',
    '-h 120',
    '-E' ,
    '--units=si' ,
    '-c',
    'BACK#F2F2F2',
    '-c',
    'SHADEA#F2F2F2',
    '-c',
    'SHADEB#F2F2F2',
    '-c',
    'FONT#555555',
    '-c',
    'ARROW#555555',
    '--font',
    'DEFAULT:13:Courier',
    'DEF:out_min_raw=/docs/rrd/localhost/interface-eth0/if_octets.rrd:tx:MIN' ,
    'DEF:out_avg_raw=/docs/rrd/localhost/interface-eth0/if_octets.rrd:tx:AVERAGE' ,
    'DEF:out_max_raw=/docs/rrd/localhost/interface-eth0/if_octets.rrd:tx:MAX' ,
    'DEF:inc_min_raw=/docs/rrd/localhost/interface-eth0/if_octets.rrd:rx:MIN' ,
    'DEF:inc_avg_raw=/docs/rrd/localhost/interface-eth0/if_octets.rrd:rx:AVERAGE' ,
    'DEF:inc_max_raw=/docs/rrd/localhost/interface-eth0/if_octets.rrd:rx:MAX' ,
    'CDEF:out_min=out_min_raw,8,*' ,
    'CDEF:out_avg=out_avg_raw,8,*' ,
    'CDEF:out_max=out_max_raw,8,*' ,
    'CDEF:inc_min=inc_min_raw,8,*' ,
    'CDEF:inc_avg=inc_avg_raw,8,*' ,
    'CDEF:inc_max=inc_max_raw,8,*' ,
    'CDEF:overlap=out_avg,inc_avg,GT,inc_avg,out_avg,IF' ,
    'CDEF:mytime=out_avg_raw,TIME,TIME,IF' ,
    'CDEF:sample_len_raw=mytime,PREV(mytime),-' ,
    'CDEF:sample_len=sample_len_raw,UN,0,sample_len_raw,IF' ,
    'CDEF:out_avg_sample=out_avg_raw,UN,0,out_avg_raw,IF,sample_len,*' ,
    'CDEF:out_avg_sum=PREV,UN,0,PREV,IF,out_avg_sample,+' ,
    'CDEF:inc_avg_sample=inc_avg_raw,UN,0,inc_avg_raw,IF,sample_len,*' ,
    'CDEF:inc_avg_sum=PREV,UN,0,PREV,IF,inc_avg_sample,+' ,
    'AREA:out_avg#B7EFB7' ,
    'AREA:inc_avg#B7B7F7' ,
    'AREA:overlap#89B3C9' ,
    '"LINE1:out_avg#00E000:Outgoing"' ,
    '"LINE1:inc_avg#0000FF:Incoming"' ]
}   
